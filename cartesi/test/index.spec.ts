import { describe, expect, test } from "@jest/globals";
import { calculateRequiredInterestRate, Transaction } from "../src/debt";

const rawProofContext =
  '{"contextAddress":"0x6883491Ba535c16D39160C0CD60569a18afdB1a5","contextMessage":"debt service calculation for 0x6883491Ba535c16D39160C0CD60569a18afdB1a5 at 2024-12-24T15:47:25.888Z for loan application cm52n3dtu0000ju03msta02k1","extractedParameters":{"URL_PARAMS_1":"cm52n3dtu0000ju03msta02k1","transactions":"[{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-20\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-18\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-17\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-17\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-16\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-12-03\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-20\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-18\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-17\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-17\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-16\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-11-03\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-21\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-19\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-18\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-18\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-17\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-10-04\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-21\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-19\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-18\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-18\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-17\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-09-04\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-22\\"},{\\"amount\\":5000,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-20\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-19\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-19\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-18\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-08-05\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-23\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-21\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-20\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-20\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-19\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-07-06\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-23\\"},{\\"amount\\":5000,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-21\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-20\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-20\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-19\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-06-06\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-24\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-22\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-21\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-21\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-20\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-05-07\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-24\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-22\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-21\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-21\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-20\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-04-07\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-25\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-23\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-22\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-22\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-21\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-03-08\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-24\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-22\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-21\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-21\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-20\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-02-07\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-25\\"},{\\"amount\\":5000,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-23\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-22\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-22\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-21\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2024-01-08\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-26\\"},{\\"amount\\":-500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-24\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-23\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-23\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-22\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-12-09\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-26\\"},{\\"amount\\":500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-24\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-23\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-23\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-22\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-11-09\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-27\\"},{\\"amount\\":500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-25\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-24\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-24\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-23\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-10-10\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-27\\"},{\\"amount\\":500,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-25\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-24\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-24\\"},{\\"amount\\":89.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-23\\"},{\\"amount\\":6.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-09-10\\"},{\\"amount\\":5.4,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-08-28\\"},{\\"amount\\":5000,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-08-26\\"},{\\"amount\\":12,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-08-25\\"},{\\"amount\\":4.33,\\"account_id\\":\\"9r4qdwDkpEtxkDNlpb85UygzW8b9GltqrR9Vm\\",\\"iso_currency_code\\":\\"USD\\",\\"date\\":\\"2023-08-25\\"}]"},"providerHash":"0x1df172a1d20272d4c19afa10746886026c281a1ae1b2b11f5dfef68ef468bf06"}';

describe("Debt Service Calculation", () => {
  test("should calculate the correct interest rate", () => {
    const proofContext = JSON.parse(rawProofContext);

    const transactions = JSON.parse(
      proofContext.extractedParameters.transactions
    ) as Transaction[];

    const loanAmount = 20000;

    const interestRate = calculateRequiredInterestRate(
      transactions,
      loanAmount
    );

    console.log(interestRate);

    expect(interestRate).toBe(10);
  });
});
